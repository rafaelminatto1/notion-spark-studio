import dotenv from 'dotenv';
dotenv.config();

const PRODUCTION_URL = 'https://notion-spark-studio-tii7.vercel.app';

async function debugContent() {
  console.log('\nüîç DEBUG DO CONTE√öDO DA P√ÅGINA');
  console.log('===============================\n');
  
  try {
    const response = await fetch(PRODUCTION_URL);
    const html = await response.text();
    
    console.log(`üìä Status: ${response.status}`);
    console.log(`üìè Tamanho: ${html.length} caracteres`);
    console.log(`üè∑Ô∏è Content-Type: ${response.headers.get('content-type')}`);
    
    // Mostrar primeiros 1000 caracteres
    console.log('\nüìÑ PRIMEIROS 1000 CARACTERES:');
    console.log('==============================');
    console.log(html.substring(0, 1000));
    console.log('...\n');
    
    // Procurar por elementos espec√≠ficos
    console.log('üîç BUSCA POR ELEMENTOS ESPEC√çFICOS:');
    console.log('===================================');
    
    const searches = [
      'Bem-vindo ao Notion Spark Studio',
      'LoginForm',
      'signIn',
      'email',
      'password',
      'Google',
      'Demo',
      'Entrar',
      'form',
      'input',
      'button'
    ];
    
    searches.forEach(search => {
      const found = html.toLowerCase().includes(search.toLowerCase());
      const icon = found ? '‚úÖ' : '‚ùå';
      console.log(`${icon} "${search}": ${found}`);
    });
    
    // Verificar se h√° JavaScript
    console.log('\nüì± AN√ÅLISE DE SCRIPTS:');
    console.log('======================');
    const scriptMatches = html.match(/<script[^>]*>(.*?)<\/script>/gs) || [];
    console.log(`Scripts encontrados: ${scriptMatches.length}`);
    
    // Verificar Next.js data
    if (html.includes('__NEXT_DATA__')) {
      console.log('‚úÖ Next.js data encontrado');
    } else {
      console.log('‚ùå Next.js data n√£o encontrado');
    }
    
    // Verificar se √© p√°gina est√°tica ou din√¢mica
    if (html.includes('static') || response.headers.get('x-vercel-cache') === 'HIT') {
      console.log('üìÑ P√°gina est√°tica (cache HIT)');
    } else {
      console.log('üîÑ P√°gina din√¢mica');
    }
    
  } catch (error) {
    console.error('‚ùå Erro:', error.message);
  }
}

debugContent(); 